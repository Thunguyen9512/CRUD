{"ast":null,"code":"import { action, thunkOn } from \"easy-peasy\";\nimport { getProducts } from \"Services/Product.Service\";\nconst productListModel = {\n  firstLoad: true,\n  loading: true,\n  data: [],\n  params: {\n    page: 1,\n    per_page: 11,\n    total_count: 0,\n    keyword: \"\"\n  },\n  setLoading: action((state, loading) => {\n    state.loading = loading;\n  }),\n  changeParams: action((state, {\n    params\n  }) => {\n    state.params = { ...state.params,\n      ...params\n    };\n  }),\n  setData: action((state, {\n    data,\n    total_count\n  }) => {\n    state.params.total_count = total_count;\n    state.data = data;\n    state.loading = false;\n    state.firstLoad = false;\n  }),\n  loadData: action((state, payload = {}) => {\n    const params = payload.params || {};\n    state.params = { ...state.params,\n      ...params\n    };\n    state.loading = true;\n  }),\n  loadDataListener: thunkOn(actions => [actions.changeParams, actions.loadData], async (actions, target, {\n    getState,\n    getStoreState\n  }) => {\n    const {\n      loading,\n      params\n    } = getState();\n\n    if (!loading) {\n      actions.setLoading(true);\n    }\n\n    try {\n      const res = await getProducts(params);\n      setTimeout(() => {\n        actions.setData(res);\n      }, 2000);\n    } catch (e) {\n      console.log(\"Nguyen C: ProductList.Model.js, F: e, N: e \", e);\n      actions.setLoading(true);\n    }\n  })\n};\nexport default productListModel;","map":{"version":3,"sources":["D:/TN/CRUD/eddie-crud/src/Store/ProductList.Model.js"],"names":["action","thunkOn","getProducts","productListModel","firstLoad","loading","data","params","page","per_page","total_count","keyword","setLoading","state","changeParams","setData","loadData","payload","loadDataListener","actions","target","getState","getStoreState","res","setTimeout","e","console","log"],"mappings":"AAAA,SAASA,MAAT,EAAiBC,OAAjB,QAAgC,YAAhC;AAEA,SAASC,WAAT,QAA4B,0BAA5B;AAEA,MAAMC,gBAAgB,GAAG;AACvBC,EAAAA,SAAS,EAAE,IADY;AAEvBC,EAAAA,OAAO,EAAE,IAFc;AAGvBC,EAAAA,IAAI,EAAE,EAHiB;AAIvBC,EAAAA,MAAM,EAAE;AACNC,IAAAA,IAAI,EAAE,CADA;AAENC,IAAAA,QAAQ,EAAE,EAFJ;AAGNC,IAAAA,WAAW,EAAE,CAHP;AAINC,IAAAA,OAAO,EAAE;AAJH,GAJe;AAUvBC,EAAAA,UAAU,EAAEZ,MAAM,CAAC,CAACa,KAAD,EAAQR,OAAR,KAAoB;AACrCQ,IAAAA,KAAK,CAACR,OAAN,GAAgBA,OAAhB;AACD,GAFiB,CAVK;AAavBS,EAAAA,YAAY,EAAEd,MAAM,CAAC,CAACa,KAAD,EAAQ;AAAEN,IAAAA;AAAF,GAAR,KAAuB;AAC1CM,IAAAA,KAAK,CAACN,MAAN,GAAe,EAAE,GAAGM,KAAK,CAACN,MAAX;AAAmB,SAAGA;AAAtB,KAAf;AACD,GAFmB,CAbG;AAgBvBQ,EAAAA,OAAO,EAAEf,MAAM,CAAC,CAACa,KAAD,EAAQ;AAAEP,IAAAA,IAAF;AAAQI,IAAAA;AAAR,GAAR,KAAkC;AAChDG,IAAAA,KAAK,CAACN,MAAN,CAAaG,WAAb,GAA2BA,WAA3B;AACAG,IAAAA,KAAK,CAACP,IAAN,GAAaA,IAAb;AACAO,IAAAA,KAAK,CAACR,OAAN,GAAgB,KAAhB;AACAQ,IAAAA,KAAK,CAACT,SAAN,GAAkB,KAAlB;AACD,GALc,CAhBQ;AAsBvBY,EAAAA,QAAQ,EAAEhB,MAAM,CAAC,CAACa,KAAD,EAAQI,OAAO,GAAG,EAAlB,KAAyB;AACxC,UAAMV,MAAM,GAAGU,OAAO,CAACV,MAAR,IAAkB,EAAjC;AAEAM,IAAAA,KAAK,CAACN,MAAN,GAAe,EAAE,GAAGM,KAAK,CAACN,MAAX;AAAmB,SAAGA;AAAtB,KAAf;AACAM,IAAAA,KAAK,CAACR,OAAN,GAAgB,IAAhB;AACD,GALe,CAtBO;AA4BvBa,EAAAA,gBAAgB,EAAEjB,OAAO,CACtBkB,OAAD,IAAa,CAACA,OAAO,CAACL,YAAT,EAAuBK,OAAO,CAACH,QAA/B,CADU,EAEvB,OAAOG,OAAP,EAAgBC,MAAhB,EAAwB;AAAEC,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,GAAxB,KAAwD;AACtD,UAAM;AAAEjB,MAAAA,OAAF;AAAWE,MAAAA;AAAX,QAAsBc,QAAQ,EAApC;;AAEA,QAAI,CAAChB,OAAL,EAAc;AACZc,MAAAA,OAAO,CAACP,UAAR,CAAmB,IAAnB;AACD;;AAED,QAAI;AACF,YAAMW,GAAG,GAAG,MAAMrB,WAAW,CAACK,MAAD,CAA7B;AAEAiB,MAAAA,UAAU,CAAC,MAAM;AACfL,QAAAA,OAAO,CAACJ,OAAR,CAAgBQ,GAAhB;AACD,OAFS,EAEP,IAFO,CAAV;AAGD,KAND,CAME,OAAOE,CAAP,EAAU;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAY,6CAAZ,EAA2DF,CAA3D;AACAN,MAAAA,OAAO,CAACP,UAAR,CAAmB,IAAnB;AACD;AACF,GAnBsB;AA5BF,CAAzB;AAmDA,eAAeT,gBAAf","sourcesContent":["import { action, thunkOn } from \"easy-peasy\";\r\n\r\nimport { getProducts } from \"Services/Product.Service\";\r\n\r\nconst productListModel = {\r\n  firstLoad: true,\r\n  loading: true,\r\n  data: [],\r\n  params: {\r\n    page: 1,\r\n    per_page: 11,\r\n    total_count: 0,\r\n    keyword: \"\",\r\n  },\r\n  setLoading: action((state, loading) => {\r\n    state.loading = loading;\r\n  }),\r\n  changeParams: action((state, { params }) => {\r\n    state.params = { ...state.params, ...params };\r\n  }),\r\n  setData: action((state, { data, total_count }) => {\r\n    state.params.total_count = total_count;\r\n    state.data = data;\r\n    state.loading = false;\r\n    state.firstLoad = false;\r\n  }),\r\n  loadData: action((state, payload = {}) => {\r\n    const params = payload.params || {};\r\n\r\n    state.params = { ...state.params, ...params };\r\n    state.loading = true;\r\n  }),\r\n  loadDataListener: thunkOn(\r\n    (actions) => [actions.changeParams, actions.loadData],\r\n    async (actions, target, { getState, getStoreState }) => {\r\n      const { loading, params } = getState();\r\n\r\n      if (!loading) {\r\n        actions.setLoading(true);\r\n      }\r\n\r\n      try {\r\n        const res = await getProducts(params);\r\n\r\n        setTimeout(() => {\r\n          actions.setData(res);\r\n        }, 2000);\r\n      } catch (e) {\r\n        console.log(\"Nguyen C: ProductList.Model.js, F: e, N: e \", e);\r\n        actions.setLoading(true);\r\n      }\r\n    }\r\n  ),\r\n};\r\n\r\nexport default productListModel;\r\n"]},"metadata":{},"sourceType":"module"}